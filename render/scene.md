[<< 返回到主页](index.md)

**这里将介绍游戏场景的博客文章**  

**认识场景**  
1. 场景定义的坐标系为世界坐标系  
2. 物体自身的坐标系与世界坐标系通过一个Node来描述(Node包含了Transform变换数据)  
3. 物体与物体之间可能存在父子关系，兄弟关系或没关系等，通过Node来描述(Node是一颗树形结构且子节点是一颗双链表)  
4. 场景中必须包含相机，用Camera来表示  
5. 场景需要支持渲染操作RenderScene  
6. 场景进行渲染时，必须要遍历所有的物体，则Node的双链表结构来保存所有的Node，记录第一个Node和最后一个Node(Node两用)  
7. 场景除了遍历物体外，还需要支持查找物体  
8. 其他  

**场景附加信息**  
1. 场景名  
2. 场景绑定的背景音乐  
3. 场景的地形，用Terrain表示  
4. 场景的环境光设置，针对所有物体  
5. 场景中静态物体的光照贴图  
6. 其他  

**扩展功能**  
1. 通过给定一个包围球，查询包含的所有物体  
2. 通过给定一个包围盒，查询包含的所有物体  
3. 通过一条射线，查询相交的所有物体(并包含最近最远距离信息)  
4. 渲染前，使用截头体剔除来减少渲染物体  
5. 截头体剔除后，使用遮挡剔除，进一步减少完全被遮挡的物体  
6. 脚本功能(比如Lua支持)   
7. 其他  

**场景渲染队列**  
场景渲染需按照渲染队列来分类渲染  
1. 物体按层次分为天空，模型，界面，附加  
2. 物体按透明度有不透明和半透明之分  

则对所有物体根据层次和透明度分为：
天空不透明  
天空透明  
模型不透明  
模型透明  
界面半透明  
附加半透明  
物体渲染按照上面6种队列顺序绘制   


