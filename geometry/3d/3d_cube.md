[<< 返回到上页](../index.md)

**这里将介绍长方体和OBB的博客文章**  

**长方体**  
正方体是长方体的一种特殊表示，这里仅介绍长方体  
最大最小表示：  
```
class AABB
{
    // 最大最小
    Vector3 min;
    Vector3 max;
    // 若存在旋转，可使用坐标轴方向和尺寸大小表示  
    Vector3 center;
    Vector3 halfSize;
    Vector3 dirx;
    Vector3 diry;
    Vector3 dirz;
}
```

1. 点是否在长方体内  

对长方体进行区域打码，形成27个区域。x,y,z轴各有3个区域，则用2个bit来标识，供6个bit即可标记所有可能性，可以查看三维裁剪。  

如果标记码为 000000则表示在内部  

2. 点到长方体的最短距离  

根据标记码 可以很容易识别点在哪一个区域，然后找出这个区域最近的顶点或者投影点   

3. 线与长方体相交  

与2d中线与矩形相交类似，这里有6个平面计算相交可能性。只需在原有的基础上，添加z值的判断。

4. 三角面与长方体相交   

可查看三位裁剪算法，立方体对三角面的裁剪。主要是分区  

5. 长方体与长方体相交  

与2d矩形与矩形相交类似，可直接将Vector2替换为Vector3使用

6. 长方体与平面相交  

可以判断长方体中心点与平面的最短距离，然后比较距离与halfsize的大小    

对于可能旋转的长方体，可以构建一个长方体的坐标系出来。然后计算中心点在平面的投影点，再计算投影点在长方体三个坐标轴的投影值，与halfSize比较大小即可。  

7. 长方体与球体是否相交  

找出球心与长方体的最短距离  
比较距离与半径的大小  

**OBB**  
带方向的AABB包围盒。这里可参考PCA主成分分析来计算散点的ABB包围盒。这是一个近似值，并不一定是解析解。   
