[<< 返回到上级](index.md)

**这里将介绍图形学光照模型的博客文章**  

本文概念部分引用[这里](https://zhuanlan.zhihu.com/p/21376124)  
需要清楚BRDF是什么？辐射度量学是什么？  

[1. 经验光照](#1)  
[2. 物理光照](#2)  
[3. 表面绘制算法](#3)  
[4. 光线跟踪](#4)  

<span id="1"></span>  
## **1. 经验光照**  

一般的光照模型：  
![Phong](images/phong.png)  
其中包含了环境，漫反射，镜面发射三种光照模型，这里使用的是Phong光照模型。  
Blinn Phong光照模型：  
![Blinn Phong](images/blinn_phong.png)  
对Phong光照模型使用半角向量h  
![Half Angle](images/half_angle.png)  

下标a表示环境光，d表示漫反射光，s表示高光，k表示发射系数或者材质颜色，I表示光的颜色或亮度，alpha表示表面的粗糙程度，值越小越粗糙，越大越光滑。r为反射向量，v表示观察向量，n表示法线向量，l表示入射向量，h表示(v, l)的角平分线即半角向量     
Blinn Phong是对Phong的一个优化和改进。其计算简单，效果更接近真实。  

<span id="2"></span>  
## **2. 物理光照**  

辐射度量学基础概念理解：  
能量，通量，辐照度，辐射度，立体角，辐射率，微平面，法线分布函数，Shadow和Masking，折射率等等  

<span id="3"></span>  
## **3. 表面绘制算法**  

表面绘制也称为明暗处理算法，主要指应用光照模型获得投影表面位置像素颜色的过程。  

恒定光强绘制，平面所有点应用一种光强来绘制   

Gouraud着色绘制，平滑着色，使用亮度插值来绘制其内部点。先计算每个多边形顶点的平均单位法线，再对每个点应用光照模型计算光强值，最后内部点进行插值计算光强  

Phong明暗处理，也称为法矢量插值明暗处理。这里与Gouraud处理不同，使用顶点的法线对内部点进行插值，然后对每个内部点应用光照模型计算光强。   

恒定光强计算简单，效果差；Gouraud效果适中，计算量较大；Phong效果好，计算量大。  

<span id="4"></span>  
## **4. 光线跟踪**  

光线追踪方法模拟物理光在空间中的传播（考虑反射和折射），从投影平面的一个像素点发出一条或多条光线进入场景，遇到物体表面就提取表面的材质信息，沿反射光线继续前进（若是透明物体，再分出一条折射光线），这样递归下去直到光线到达光源、场景之外（环境）或光亮度减小到规定的临界值，将过程中所有颜色信息相加就是显示在这一点的颜色。  
全局光照带来真实感效果，但其计算量很大，难以做到实时性，一般采用离线计算获得全局的光照贴图。光线跟踪就是其中一种全局光照，原理简单，实现起来容易。  
接下来介绍Ambient Occlusion(环境光遮挡)，实现场景中的明暗处理，增强游戏的真实感。光线跟踪的相关原理就不做图解释了，主要是分析代码。  

地面，光源，模型  






